import{a as Z,b as ee,d as te,h as ne,j as ie,k as re,l as K,m as oe,o as L,q as ae,r as ce,s as se,t as pe,u as de,w as le,y as me}from"./chunk-X5IIMTIQ.js";import{Ab as b,Bb as p,Cb as j,Db as C,Eb as B,Gb as G,Hb as x,Ib as k,Jb as I,Qa as c,Ra as v,W as T,Z as S,_ as A,ca as w,fb as m,hb as d,ia as M,ja as $,jc as F,kc as H,lb as a,lc as U,mb as o,mc as z,nb as h,nc as Q,ob as f,oc as X,pb as g,qa as O,qb as R,r as Y,ra as E,sb as V,ub as _,x as J}from"./chunk-IHM3KHWJ.js";var l=function(e){return e.VEHICLES="Vehicles",e.STARSHIPS="Starships",e.PEOPLE="People",e}(l||{});var D="https://www.swapi.tech/api/",y={production:!1,swApi:{films:`${D}films/`,people:`${D}people/`,planets:`${D}planets/`,species:`${D}species/`,starships:`${D}starships/`,vehicles:`${D}vehicles/`}};var N=(()=>{let n=class n{constructor(t){this.http=t}_setParams(t){let i=new Z;return t===void 0||Object.entries(t).forEach(([s,u])=>{u!==void 0&&(i=i.set(s,u.toString()))}),i}listPeople(t){return this.http.get(y.swApi.people,{params:this._setParams(t)})}retrievePeople(t){return this.http.get(`${y.swApi.people}${t}`)}listVehicles(t){return this.http.get(y.swApi.vehicles,{params:this._setParams(t)})}retrieveVehicle(t){return this.http.get(`${y.swApi.vehicles}${t}`)}listStarships(t){return this.http.get(y.swApi.starships,{params:this._setParams(t)})}retrieveStarship(t){return this.http.get(`${y.swApi.starships}${t}`)}};n.\u0275fac=function(i){return new(i||n)(w(ee))},n.\u0275prov=S({token:n,factory:n.\u0275fac,providedIn:"root"});let e=n;return e})();var Pe=e=>["/game/play",e],Se=e=>({"background-image":e});function we(e,n){if(e&1&&(f(0),p(1),h(2,"br"),g()),e&2){let r=n.$implicit;c(),C(" ",r.name," ")}}function Me(e,n){if(e&1&&(f(0),a(1,"div",9),p(2),o(),a(3,"div",10),p(4),o(),a(5,"div",11),m(6,we,3,1,"ng-container",3),o(),g()),e&2){let r=n.ngIf,t=_(2).$implicit;c(2),j(t.description),c(2),C(" Total number of cards: ",r.total_records," "),c(2),d("ngForOf",r.results)}}function Oe(e,n){if(e&1&&(f(0),a(1,"div",7),m(2,Me,7,3,"ng-container",8),x(3,"async"),o(),g()),e&2){let r=_().$implicit;_();let t=b(7);c(2),d("ngIf",k(3,2,r.data$))("ngIfElse",t)}}function Ee(e,n){if(e&1){let r=R();f(0),a(1,"a",4),V("mouseenter",function(){let i=O(r).$implicit;return E(i.isHovered=!0)})("mouseleave",function(){let i=O(r).$implicit;return E(i.isHovered=!1)}),a(2,"div",5),p(3),o(),m(4,Oe,4,4,"ng-container",6),o(),g()}if(e&2){let r=n.$implicit;c(),d("routerLink",G(4,Pe,r.type))("ngStyle",G(6,Se,"url("+r.coverImagePath+")")),c(2),j(r.title),c(),d("ngIf",r.isHovered)}}function be(e,n){e&1&&(a(0,"div",12),p(1,"Loading..."),o())}var _e=(()=>{let n=class n{constructor(t){this.swapiService=t,this.initialDataParams={limit:5},this.deckConfig=[{type:l.VEHICLES,coverImagePath:"assets/images/vehicles-deck-cover.png",title:"Vehicles",isHovered:!1,data$:this.swapiService.listVehicles(this.initialDataParams),description:"Deck containing all the vehicles from the Star Wars universe."},{type:l.STARSHIPS,coverImagePath:"assets/images/starships-deck-cover.png",title:"Starships",isHovered:!1,data$:this.swapiService.listStarships(this.initialDataParams),description:"Deck containing all the starships from the Star Wars universe."},{type:l.PEOPLE,coverImagePath:"assets/images/peoples-deck-cover.png",title:"Hereos&Villains",isHovered:!1,data$:this.swapiService.listPeople(this.initialDataParams),description:"Deck containing all the heroes and villans from the Star Wars universe."}]}};n.\u0275fac=function(i){return new(i||n)(v(N))},n.\u0275cmp=M({type:n,selectors:[["app-deck-picker"]],decls:8,vars:1,consts:[["loading",""],[1,"deck-picker-container"],[1,"decks-container"],[4,"ngFor","ngForOf"],[1,"deck",3,"mouseenter","mouseleave","routerLink","ngStyle"],[1,"deck-title"],[4,"ngIf"],[1,"deck-contents"],[4,"ngIf","ngIfElse"],[1,"deck-description"],[1,"deck-total-number-of-cards"],[1,"deck-card-examples"],[1,"deck-data-loading"]],template:function(i,s){i&1&&(h(0,"app-go-back-button"),a(1,"div",1)(2,"h1"),p(3,"Select your deck"),o(),a(4,"div",2),m(5,Ee,5,8,"ng-container",3),o()(),m(6,be,2,0,"ng-template",null,0,I)),i&2&&(c(5),d("ngForOf",s.deckConfig))},dependencies:[F,H,U,re,L,z],styles:['@import"https://fonts.cdnfonts.com/css/star-wars";.deck-picker-container[_ngcontent-%COMP%]{display:flex;justify-content:center;flex-direction:column;align-items:center;height:100%;width:100%}.deck-picker-container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#ffe81f;font-size:48px;margin-bottom:32px;font-family:Star Wars,sans-serif}.deck-picker-container[_ngcontent-%COMP%]   .decks-container[_ngcontent-%COMP%]{width:inherit;display:flex;flex-direction:row;justify-content:space-around;align-items:center}.deck-picker-container[_ngcontent-%COMP%]   .decks-container[_ngcontent-%COMP%]   .deck[_ngcontent-%COMP%]{text-decoration:none;cursor:pointer;width:350px;position:relative;height:500px;display:flex;box-sizing:border-box;padding:16px 0;flex-direction:column;border:10px groove #2e557c;background-size:cover;background-repeat:no-repeat;background-position:center;border-radius:15px;transition:.5s}.deck-picker-container[_ngcontent-%COMP%]   .decks-container[_ngcontent-%COMP%]   .deck[_ngcontent-%COMP%]   .deck-title[_ngcontent-%COMP%]{font-size:24px;font-weight:700;color:#ffe81f;text-align:center;margin-bottom:16px}.deck-picker-container[_ngcontent-%COMP%]   .decks-container[_ngcontent-%COMP%]   .deck[_ngcontent-%COMP%]   .deck-contents[_ngcontent-%COMP%]{display:flex;flex-direction:column;background-color:#000;padding:8px 16px;margin:0 16px;border-radius:4px;animation:_ngcontent-%COMP%_fadeInFromBottom .5s ease-out}.deck-picker-container[_ngcontent-%COMP%]   .decks-container[_ngcontent-%COMP%]   .deck[_ngcontent-%COMP%]   .deck-contents[_ngcontent-%COMP%]   .deck-data-loading[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100%;font-size:24px;color:#fff}.deck-picker-container[_ngcontent-%COMP%]   .decks-container[_ngcontent-%COMP%]   .deck[_ngcontent-%COMP%]   .deck-contents[_ngcontent-%COMP%]   .deck-description[_ngcontent-%COMP%]{font-size:14px;color:#fff;padding-bottom:8px}.deck-picker-container[_ngcontent-%COMP%]   .decks-container[_ngcontent-%COMP%]   .deck[_ngcontent-%COMP%]   .deck-contents[_ngcontent-%COMP%]   .deck-total-number-of-cards[_ngcontent-%COMP%]{font-size:12px;color:#fff;padding-bottom:16px}.deck-picker-container[_ngcontent-%COMP%]   .decks-container[_ngcontent-%COMP%]   .deck[_ngcontent-%COMP%]   .deck-contents[_ngcontent-%COMP%]   .deck-card-examples[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px;color:#fff;font-size:12px}.deck-picker-container[_ngcontent-%COMP%]   .decks-container[_ngcontent-%COMP%]   .deck[_ngcontent-%COMP%]:hover{border:10px groove #ffe81f;height:520px}@keyframes _ngcontent-%COMP%_fadeInFromBottom{0%{transform:translateY(20px)}to{transform:translateY(0)}}']});let e=n;return e})();var W=function(e){return e.MASS="mass",e.CREW="crew",e}(W||{}),q=(()=>{let n=class n{set currentCardsIds(t){this._currentCardsIds=t}constructor(t){this.swapiService=t,this._evaluationAttribute=new Map([[l.PEOPLE,W.MASS],[l.VEHICLES,W.CREW],[l.STARSHIPS,W.CREW]])}initGame(t){return this.currentDeckType=t,this.score={player:0,enemy:0},this.getCards().pipe(T(i=>{this.currentCardsIds=i.results.map(s=>Number(s.uid))}))}newRound(){return this.playerCardId=this.getRandomCardId(),this.enemyCardId=this.getRandomCardId(),{player:this.playerCardId,enemy:this.enemyCardId}}evaluateRound(t,i){if(this.currentDeckType===void 0)throw new Error("Deck type is not set");let s=this.getEvaluateAttributeCardValue(t),u=this.getEvaluateAttributeCardValue(i);if(s>u)this.score.player++;else if(s<u)this.score.enemy++;else return null;return s>u?t:i}getRandomCardId(){return this._currentCardsIds[Math.floor(Math.random()*this._currentCardsIds.length)]}getCards(){if(!this.currentDeckType)throw new Error("Deck type is not set");let t,i={limit:100,page:1};switch(this.currentDeckType){case l.PEOPLE:t=this.swapiService.listPeople(i);break;case l.VEHICLES:t=this.swapiService.listVehicles(i);break;case l.STARSHIPS:t=this.swapiService.listStarships(i);break}return t}retrieveCard(t){if(!this.currentDeckType)throw new Error("Deck type is not set");switch(this.currentDeckType){case l.PEOPLE:return this.swapiService.retrievePeople(t);case l.VEHICLES:return this.swapiService.retrieveVehicle(t);case l.STARSHIPS:return this.swapiService.retrieveStarship(t)}}getEvaluateAttributeCardValue(t){if(!this.currentDeckType)throw new Error("Deck type is not set");let i=this._evaluationAttribute.get(this.currentDeckType),s=t[i.toString()];if(typeof s!="string")throw new Error("Invalid card value");let u=Number(s.replace(",",""));return isNaN(u)?0:u}};n.\u0275fac=function(i){return new(i||n)(w(N))},n.\u0275prov=S({token:n,factory:n.\u0275fac,providedIn:"root"});let e=n;return e})();function Ie(e,n){if(e&1&&(f(0),a(1,"div",4),p(2),o(),g()),e&2){let r=n.$implicit;c(2),B("",r.key,": ",r.value,"")}}var Ce=(()=>{let n=class n{constructor(t){this.gameService=t,this.cardMetaDataExcludedKyes=["name","mass","url","created","edited","films","pilots","homeworld","crew"]}validateInputs(){if(!this.gameService.currentDeckType)throw new Error("gameService: Missing required data: currentDeckType");if(!this.cardData)throw new Error("CardComponent: Missing required input: cardData")}ngOnInit(){this.validateInputs(),this.cardType=this.gameService.currentDeckType,this.cardEvalAttribute=this.gameService.getEvaluateAttributeCardValue(this.cardData),this.cardMetaData=Object.entries(this.cardData).filter(([t])=>!this.cardMetaDataExcludedKyes.includes(t)).map(([t,i])=>({key:t,value:i}))}};n.\u0275fac=function(i){return new(i||n)(v(q))},n.\u0275cmp=M({type:n,selectors:[["app-card"]],inputs:{cardData:"cardData"},decls:13,vars:6,consts:[[1,"card-container"],[4,"ngFor","ngForOf"],[1,"card-attack-wrapper"],["fontIcon","local_fire_department"],[1,"card-metadata-record"]],template:function(i,s){i&1&&(a(0,"div",0)(1,"mat-card")(2,"mat-card-header")(3,"mat-card-title"),p(4),x(5,"titlecase"),o(),a(6,"mat-card-subtitle"),p(7),o()(),a(8,"mat-card-content"),m(9,Ie,3,2,"ng-container",1),o(),a(10,"div",2),h(11,"mat-icon",3),p(12),o()()()),i&2&&(c(4),j(k(5,4,s.cardData.name)),c(3),C("Type: ",s.cardType,""),c(2),d("ngForOf",s.cardMetaData),c(3),C(" ",s.cardEvalAttribute," "))},dependencies:[F,ae,se,de,pe,ce,oe,Q],styles:['@import"https://fonts.cdnfonts.com/css/star-wars";.card-container[_ngcontent-%COMP%]{width:300px;height:400px}.card-container[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]{height:100%;background-color:#2e557c;border:8px groove #ffe81f;border-radius:15px;color:#fff}.card-metadata-record[_ngcontent-%COMP%]{font-size:8px}.card-attack-wrapper[_ngcontent-%COMP%]{display:flex;margin:auto 12px 12px 0;flex-direction:row;font-size:24px;color:#381010;justify-content:flex-end;font-family:Roboto,sans-serif;font-weight:700;gap:2px}.card-attack-wrapper[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#381010;font-size:24px}']});let e=n;return e})();function Te(e,n){e&1&&(f(0),p(1,"Result is: Draw!"),g())}function Re(e,n){if(e&1&&p(0),e&2){let r=_(3);C("Winner is: ",r.winner,"!")}}function Ve(e,n){if(e&1&&(f(0),a(1,"div",8),m(2,Te,2,0,"ng-container",7)(3,Re,1,1,"ng-template",null,1,I),o(),g()),e&2){let r=b(4),t=_(2);c(2),d("ngIf",t.winner=="Draw")("ngIfElse",r)}}function je(e,n){if(e&1){let r=R();f(0),a(1,"button",13),V("click",function(){O(r);let i=_(3);return E(i.initRound())}),p(2,"Next Round"),o(),g()}}function Ae(e,n){if(e&1){let r=R();a(0,"button",13),V("click",function(){O(r);let i=_(3);return E(i.evalRound())}),p(1,"Fight!"),o()}}function $e(e,n){if(e&1&&(f(0),a(1,"div",9)(2,"div",10)(3,"span"),p(4," Player Card "),o(),h(5,"app-card",11),o(),a(6,"div",12),m(7,je,3,0,"ng-container",7)(8,Ae,2,0,"ng-template",null,2,I),o(),a(10,"div",10)(11,"span"),p(12," Enemy Card "),o(),h(13,"app-card",11),o()(),g()),e&2){let r=n.ngIf,t=b(9),i=_(2);c(5),d("cardData",r.playerCard.result.properties),c(2),d("ngIf",i.winner)("ngIfElse",t),c(6),d("cardData",r.enemyCard.result.properties)}}function Be(e,n){if(e&1&&(f(0),h(1,"app-go-back-button",4),a(2,"div",5),p(3),o(),a(4,"div",6),m(5,Ve,5,2,"ng-container",3)(6,$e,14,4,"ng-container",7),x(7,"async"),o(),g()),e&2){let r=_(),t=b(3);c(),d("route","/game"),c(2),B(" ",r.gameService.score.player," : ",r.gameService.score.enemy," "),c(2),d("ngIf",r.winner),c(),d("ngIf",k(7,6,r.roundCards$))("ngIfElse",t)}}function Fe(e,n){e&1&&(a(0,"div",14),p(1,"Loading..."),o())}var ve=(()=>{let n=class n{constructor(t,i){this.gameService=t,this.route=i,this.gameDeckType=this.route.snapshot.params.deckType}ngOnInit(){this.cardsData$=this.gameService.initGame(this.gameDeckType).pipe(T(()=>{this.initRound()}))}initRound(){this.winner=null;let t=this.gameService.newRound();this.roundCards$=J([this.gameService.retrieveCard(t.player),this.gameService.retrieveCard(t.enemy)]).pipe(Y(([i,s])=>({playerCard:i,enemyCard:s})),T(i=>{this.playerCard=i.playerCard,this.enemyCard=i.enemyCard}))}evalRound(){if(this.winner){this.initRound();return}let t=this.gameService.evaluateRound(this.playerCard.result.properties,this.enemyCard.result.properties);this.winner=t?t.name:"Draw"}};n.\u0275fac=function(i){return new(i||n)(v(q),v(ne))},n.\u0275cmp=M({type:n,selectors:[["app-board"]],decls:4,vars:3,consts:[["loading",""],["winnerTemplate",""],["evalButton",""],[4,"ngIf"],[3,"route"],[1,"score"],[1,"board-container"],[4,"ngIf","ngIfElse"],[1,"winner"],[1,"board"],[1,"card-wrapper"],[3,"cardData"],[1,"round-button-wrapper"],[3,"click"],[1,"loading"]],template:function(i,s){i&1&&(m(0,Be,8,8,"ng-container",3),x(1,"async"),m(2,Fe,2,0,"ng-template",null,0,I)),i&2&&d("ngIf",k(1,1,s.cardsData$))},dependencies:[H,L,Ce,z],styles:['@import"https://fonts.cdnfonts.com/css/star-wars";.score[_ngcontent-%COMP%]{position:absolute;display:flex;justify-content:center;top:10%;text-align:center;font-size:48px;font-family:Star Wars,sans-serif;color:#ffe81f;width:100%}.loading[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;color:#ffe81f;font-size:32px;font-family:Star Wars,sans-serif}.board-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center;align-items:center;flex-direction:column;width:100%;height:100%;gap:50px}.board-container[_ngcontent-%COMP%]   .winner[_ngcontent-%COMP%]{text-align:center;font-size:32px;font-family:Star Wars,sans-serif;color:#ffe81f}.board-container[_ngcontent-%COMP%]   .board[_ngcontent-%COMP%]{display:flex;flex-direction:row;width:100%;justify-content:space-evenly;gap:18px}.board-container[_ngcontent-%COMP%]   .board[_ngcontent-%COMP%]   .card-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.board-container[_ngcontent-%COMP%]   .board[_ngcontent-%COMP%]   .card-wrapper[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#ffe81f;font-size:24px;text-align:center}.board-container[_ngcontent-%COMP%]   .board[_ngcontent-%COMP%]   .round-button-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.board-container[_ngcontent-%COMP%]   .board[_ngcontent-%COMP%]   .round-button-wrapper[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{cursor:pointer;height:40px;width:200px;border-radius:20px;background-color:#2e557c;color:#fff;font-family:Star Wars,sans-serif;font-size:18px}.board-container[_ngcontent-%COMP%]   .board[_ngcontent-%COMP%]   .round-button-wrapper[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#ffe81f;color:#2e557c}']});let e=n;return e})();var xe=(()=>{let n=class n{constructor(t){this.router=t}canActivate(t){let i=Object.values(l).map(u=>u),s=t.params.deckType;return i.includes(s)?!0:(this.router.navigate(["/game"]),!1)}};n.\u0275fac=function(i){return new(i||n)(w(ie))},n.\u0275prov=S({token:n,factory:n.\u0275fac,providedIn:"root"});let e=n;return e})();var He=[{path:"",component:_e},{path:"play/:deckType",component:ve,canActivate:[xe]}],ke=(()=>{let n=class n{};n.\u0275fac=function(i){return new(i||n)},n.\u0275mod=$({type:n}),n.\u0275inj=A({imports:[K.forChild(He),K]});let e=n;return e})();var vt=(()=>{let n=class n{};n.\u0275fac=function(i){return new(i||n)},n.\u0275mod=$({type:n}),n.\u0275inj=A({imports:[X,te,ke,le,me]});let e=n;return e})();export{vt as GameModule};
